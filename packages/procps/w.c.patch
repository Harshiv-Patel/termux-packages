--- ../procps-3.3.17/w.c	2021-02-09 15:41:25.000000000 +0530
+++ ./w.c	2021-04-20 17:59:11.845134873 +0530
@@ -207,13 +207,16 @@
 
 	if (ip_addresses) { /* -i switch used */
 		memcpy(&ut_addr_v6, &u->ut_addr_v6, sizeof(ut_addr_v6));
-		if (IN6_IS_ADDR_V4MAPPED(&ut_addr_v6)) {
-			/* map back */
+// purposefully hidden from compiler, change to `#if 1` if needed
+#if 0
+        if (IN6_IS_ADDR_V4MAPPED(&ut_addr_v6)) {
+			/* map back */ 
 			ut_addr_v6[0] = ut_addr_v6[3];
 			ut_addr_v6[1] = 0;
 			ut_addr_v6[2] = 0;
 			ut_addr_v6[3] = 0;
 		}
+#endif
 		if (ut_addr_v6[1] || ut_addr_v6[2] || ut_addr_v6[3]) {
 			/* IPv6 */
 			if (!inet_ntop(AF_INET6, &ut_addr_v6, buf_ipv6, sizeof(buf_ipv6))) {
@@ -626,7 +629,7 @@
 #ifdef HAVE_UTMPX_H
 	setutxent();
 #else
-	utmpname(UTMP_FILE);
+	//utmpname(UTMP_FILE);
 	setutent();
 #endif
 	if (user) {
